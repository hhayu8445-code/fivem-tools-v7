# ========================================================================================
# API Configuration
# ========================================================================================
VITE_API_KEY=your_api_key_here
VITE_APP_ID=your_app_id_here

# ========================================================================================
# Discord OAuth2 Configuration (CRITICAL - Must be set correctly)
# ========================================================================================
VITE_DISCORD_CLIENT_ID=your_discord_client_id
VITE_DISCORD_REDIRECT_URI=https://yourdomain.com/auth/callback

# ========================================================================================
# Backend API URL (for secure OAuth token exchange)
# ========================================================================================
# Development: http://localhost:3000 or http://localhost:3000/api
# Production: https://yourdomain.com/api (Vercel automatically sets this)
VITE_BACKEND_URL=http://localhost:3000

# ========================================================================================
# VERCEL DEPLOYMENT: Backend environment variables (NOT prefixed with VITE_)
# ========================================================================================
# These must be set in Vercel dashboard (not in .env)
# DISCORD_CLIENT_ID=your_discord_client_id
# DISCORD_CLIENT_SECRET=your_discord_client_secret (NEVER share this!)
# DISCORD_REDIRECT_URI=https://yourdomain.com/auth/callback

# ========================================================================================
# SETUP INSTRUCTIONS
# ========================================================================================

# Step 1: Get Discord OAuth2 Credentials
# -------
# 1. Go to https://discord.com/developers/applications
# 2. Create a new application
# 3. Go to "OAuth2" > "General" section
# 4. Copy CLIENT ID → VITE_DISCORD_CLIENT_ID
# 5. Go to "OAuth2" > "Client Secret" section
# 6. Click "Reset Secret" and copy → DISCORD_CLIENT_SECRET (for Vercel only!)

# Step 2: Configure Redirect URI in Discord App
# -------
# 1. In Discord app > OAuth2 > Redirects
# 2. Add your callback URL:
#    - Development: http://localhost:5173/auth/callback
#    - Production: https://yourdomain.com/auth/callback
# 3. Save changes

# Step 3: Local Development
# -------
# 1. Copy this file: cp .env.example .env
# 2. Replace VITE_DISCORD_CLIENT_ID with your Discord app's CLIENT ID
# 3. Set VITE_DISCORD_REDIRECT_URI to http://localhost:5173/auth/callback
# 4. Set VITE_BACKEND_URL to http://localhost:3000 or keep default
# 5. Run: npm run dev

# Step 4: Production Deployment on Vercel
# -------
# 1. Push code to GitHub
# 2. Connect GitHub repo to Vercel
# 3. In Vercel > Settings > Environment Variables, add:
#    - DISCORD_CLIENT_ID (same as VITE_DISCORD_CLIENT_ID)
#    - DISCORD_CLIENT_SECRET (your bot's secret)
#    - DISCORD_REDIRECT_URI (https://yourdomain.vercel.app/auth/callback)
# 4. Redeploy
# 5. Update Discord app's redirect URI to match

# ========================================================================================
# TROUBLESHOOTING
# ========================================================================================

# Problem: "Discord authentication failed"
# -------
# Check:
# 1. VITE_DISCORD_CLIENT_ID is correct and non-empty
# 2. VITE_DISCORD_REDIRECT_URI matches Discord app settings exactly
# 3. Redirect URI protocol (http vs https) matches
# 4. VITE_BACKEND_URL is accessible from your browser
# 5. For Vercel: DISCORD_CLIENT_SECRET must be set in Vercel dashboard

# Problem: "Server configuration error"
# -------
# Check:
# 1. Backend environment variables are set in Vercel (not in .env)
# 2. DISCORD_CLIENT_ID, DISCORD_CLIENT_SECRET, DISCORD_REDIRECT_URI are all set
# 3. DISCORD_REDIRECT_URI in backend matches Discord app settings

# Problem: "Session expired"
# -------
# 1. Clear browser cache/cookies
# 2. Clear localStorage: Open DevTools > Console > localStorage.clear()
# 3. Try login again

# ========================================================================================
# IMPORTANT SECURITY NOTES
# ========================================================================================
# - NEVER commit .env to version control (use .env.example instead)
# - DISCORD_CLIENT_SECRET should NEVER be in frontend code or .env files
# - Keep DISCORD_CLIENT_SECRET only in Vercel environment variables
# - The backend api/discord-callback.js uses DISCORD_CLIENT_SECRET securely
# - All OAuth tokens are stored server-side, not in localStorage
